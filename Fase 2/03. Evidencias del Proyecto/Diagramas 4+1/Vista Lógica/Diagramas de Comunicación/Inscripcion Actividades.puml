@startuml
title Diagrama de Comunicación - Inscripción en Actividades

' Definimos los objetos/actores como cajas
object "Vecino" as V
object "Administrador Junta" as AJ
object "Frontend (Web/App)" as FE
object "Backend (API)" as BE
object "Base de Datos" as DB
object "Módulo Notificaciones" as NOTI

' Flujo principal
V --> FE : 1. Solicitar inscripción
FE --> BE : 2. POST /actividades/{id}/inscripciones
BE --> DB : 3. Validar inscripción en Junta
DB --> BE : 4. Respuesta (OK / No registrado)

' Caso: No registrado
BE --> FE : 5. Notificar inscripción requerida
FE --> V : 6. Error 400/401

' Caso: Registrado
BE --> DB : 7. Consultar cupos
DB --> BE : 8. Respuesta cupos

' Cupo disponible
BE --> DB : 9. Registrar inscripción (Confirmada)
BE --> AJ : 10. (opt) Nueva inscripción
BE --> NOTI : 11. Enviar confirmación
NOTI --> V : 12. Confirmación inscripción
BE --> FE : 13. 201 Created / OK

' Sin cupo + lista espera habilitada
BE --> DB : 14. Registrar lista de espera
BE --> NOTI : 15. Notificar ingreso lista espera
NOTI --> V : 16. Aviso lista espera
BE --> FE : 17. 202 Accepted / En espera

' Sin cupo + lista espera no habilitada
BE --> NOTI : 18. Notificar sin cupo
NOTI --> V : 19. Aviso sin cupo
BE --> FE : 20. 409 Conflict

@enduml
